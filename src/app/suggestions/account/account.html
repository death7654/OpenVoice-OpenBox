<div class="min-h-screen bg-gray-100 flex flex-col font-sans">

  <!-- 1. Initial Loading State (Checking session status) -->
  <div *ngIf="isLoading()" class="flex items-center justify-center flex-grow py-16">
    <div class="flex flex-col items-center justify-center p-8 bg-white shadow-2xl rounded-xl border border-gray-200">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
      <span class="mt-4 text-xl text-gray-700 font-semibold">Checking session status...</span>
    </div>
  </div>

  <!-- 2. Main Content Switching Logic (After loading) -->
  <div *ngIf="!isLoading()" class="flex flex-grow w-full">
    
    <!-- AUTHENTICATED STATE: Show the protected content (Profile) -->
    @if (isLoggedIn()) {
      <div class="w-full">
        <!-- The Profile component contains the user's data, posts, etc. -->
        <app-profile></app-profile>
      </div>
    } 
    
    <!-- UNAUTHENTICATED STATE: Show the Login Component -->
    @else {
      <!-- The Login component is centered and takes up the full width/height of the container -->
      <div class="w-full flex items-center justify-center py-16">
        <app-login></app-login>
      </div>
    }
  </div>
</div>